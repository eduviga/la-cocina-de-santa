<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La Cocina de Santa</title>
  <style>
    body{font-family:system-ui,Segoe UI,Arial;margin:0;background:#faf7f2;color:#1f1f1f}
    header{padding:28px 18px;text-align:center;background:#fff;border-bottom:1px solid #eee}
    h1{margin:0;font-size:32px}
    p{margin:8px 0 0;color:#444}
    .wrap{max-width:920px;margin:0 auto;padding:22px 18px}
    .card{background:#fff;border:1px solid #eee;border-radius:14px;padding:18px;box-shadow:0 8px 20px rgba(0,0,0,.04)}
    .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    a.btn{display:inline-block;padding:12px 14px;border-radius:10px;background:#1f6f3d;color:#fff;text-decoration:none;font-weight:600}
    a.link{color:#1f6f3d;text-decoration:none;font-weight:600}
    footer{padding:22px 18px;text-align:center;color:#666}
  </style>
</head>
<body>
  <header>
    <h1>La Cocina de Santa</h1>
    <p>Recetas caseras con sabor dominicano ðŸ‡©ðŸ‡´</p>
  </header>

  <main class="wrap">
    <section class="grid">
      <div class="card">
        <h2>Receta destacada</h2>

        <img 
          src="img/empanadas.jpg" 
          alt="Empanadas caseras de La Cocina de Santa"
          style="
            width:100%;
            border-radius:14px;
            margin:10px 0;
            box-shadow:0 10px 24px rgba(0,0,0,.15);
          "
        >

        <p style="font-weight:600;margin-top:6px;">
          Empanadas caseras
        </p>

        <p style="color:#555;">
          Crujientes por fuera, suaves por dentro y con sabor dominicano ðŸ‡©ðŸ‡´
        </p>

        <button id="btnPagar">Pagar para descargar receta</button>
      </div>

      <div class="card">
        <h2>Â¿CÃ³mo funciona?</h2>
        <p>Ves una vista previa gratis. Si te gusta, pagÃ¡s por Mercado Pago y descargÃ¡s la receta completa.</p>
        <a class="link" href="receta-empanadas.html">Probar con una receta â†’</a>
      </div>
    </section>
  </main>

  <footer>
    Â© <span id="y"></span> La Cocina de Santa
  </footer>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();
  </script>
  <script>
document.getElementById("btnPagar").addEventListener("click", async () => {
  try {
    const r = await fetch("/api/create-preference", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ title: "Empanada casera", price: 10 })
    });

    const text = await r.text();         // <-- vemos lo que realmente responde
    console.log("create-preference status:", r.status);
    console.log("create-preference response:", text);

    let data = {};
    try { data = JSON.parse(text); } catch {}

    if (!r.ok || !data.init_point) {
      alert("No se pudo iniciar el pago. AbrÃ­ F12 > Console y mirÃ¡ el log.");
      return;
    }

    window.location.href = data.init_point;
  } catch (e) {
    console.error("Error al iniciar pago:", e);
    alert("Error de red o script. MirÃ¡ F12 > Console.");
  }
});
</script>
</body>
</html>




